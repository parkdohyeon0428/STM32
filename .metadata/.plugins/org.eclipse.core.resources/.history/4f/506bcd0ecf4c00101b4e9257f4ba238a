/*
 * ap_main.c
 *
 *  Created on: Jun 19, 2025
 *      Author: kccistc
 */


#include "ap_main.h"

Button_Handler_t hBtnLeft;
Button_Handler_t hBtnRight;
Button_Handler_t hBtnONOFF;

int ap_main()
{

	uint8_t data = 1;
	int led_state = 0;
	while(1)
	{
		if (Button_GetState(&hBtnLeft) == ACT_PUSHED)
		{
			led_state ^= 1;
		}
		switch (led_state)
		{
			case 0:
				data = (data << 1) | (data >> 7);
			break;

			case 1:
				data = (data >> 1) | (data << 7);
			break;
		}

		LEDBar_Write(data);
		delay(100);
	}
	return 0;
}

void ap_init()
{
	SystemClock_Init();
	LEDBar_Init();
	Button_Init(&hBtnLeft, GPIOB, 5);
	Button_Init(&hBtnRight, GPIOB, 3);
	Button_Init(&hBtnONOFF, GPIOA, 10);
}
